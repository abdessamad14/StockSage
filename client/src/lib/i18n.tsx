import { createContext, useState, useContext, useEffect, ReactNode } from 'react';

// Define available languages
type Language = 'fr' | 'ar';

// Define translation dictionaries
type TranslationDictionary = {
  [key: string]: string;
};

// French translations
const frTranslations: TranslationDictionary = {
  // App shell
  'dashboard': 'Tableau de bord',
  'pos': 'Caisse (POS)',
  'products': 'Articles',
  'inventory': 'Stock',
  'customers': 'Clients',
  'suppliers': 'Fournisseurs',
  'orders': 'Commandes',
  'reports': 'Rapports',
  'sales_history': 'Historique des ventes',
  'settings': 'Paramètres',
  'language_fr': 'Français',
  'language_ar': 'العربية',
  'logout': 'Déconnexion',
  'offline_mode': 'Mode hors ligne',
  
  // Auth
  'login': 'Connexion',
  'username': 'Nom d\'utilisateur',
  'password': 'Mot de passe',
  'login_button': 'Se connecter',
  'login_error': 'Nom d\'utilisateur ou mot de passe incorrect',
  
  // Dashboard
  'last_sync': 'Dernière synchronisation',
  'sync_now': 'Synchroniser',
  'daily_sales': 'Ventes du jour',
  'low_stock_alert': 'Alerte Stock',
  'products_count': 'produits',
  'view_details': 'Voir les détails',
  'vs_yesterday': 'vs. hier',
  'popular_products': 'Produits populaires',
  'sold_today': 'vendus aujourd\'hui',
  'in_stock': 'En stock',
  'low_stock': 'Stock bas',
  'out_of_stock': 'Rupture de stock',
  'recent_activities': 'Activités récentes',
  'sale': 'Vente',
  'order': 'Commande',
  'adjustment': 'Ajustement',
  'minutes_ago': 'il y a {0} minutes',
  'hours_ago': 'il y a {0} heures',
  'stock_added': 'Stock ajouté',
  'items': 'articles',
  'receipt_from_supplier': 'Réception du fournisseur',
  'stock_level_alert': 'Alerte niveau de stock',
  'products_below_threshold': 'produits en dessous du seuil minimum',
  
  // Products
  'add_product': 'Ajouter un article',
  'edit_product': 'Modifier l\'article',
  'delete_product': 'Supprimer l\'article',
  'product_name': 'Nom de l\'article',
  'barcode': 'Code-barres',
  'category': 'Catégorie',
  'cost_price': 'Prix d\'achat',
  'selling_price': 'Prix de vente',
  'quantity': 'Quantité',
  'min_stock_level': 'Niveau minimum',
  'unit': 'Unité',
  'save': 'Enregistrer',
  'cancel': 'Annuler',
  'search_products': 'Rechercher des articles',
  'scan_barcode': 'Scanner un code-barres',
  'filters': 'Filtres',
  'all_categories': 'Toutes les catégories',
  'price': 'Prix',
  
  // Barcode scanner
  'scan_code': 'Scanner un code-barres',
  'place_barcode': 'Placez le code-barres à l\'intérieur du cadre pour le scanner automatiquement.',
  'toggle_flash': 'Activer flash',
  'enter_manually': 'Saisir manuellement',
  
  // POS
  'point_of_sale': 'Point de vente',
  'cart': 'Panier',
  'add_item': 'Ajouter un article',
  'customer': 'Client',
  'select_customer': 'Sélectionner un client',
  'add_customer': 'Ajouter un client',
  'subtotal': 'Sous-total',
  'discount': 'Remise',
  'total': 'Total',
  'payment_method': 'Mode de paiement',
  'cash': 'Espèces',
  'credit': 'Crédit',
  'bank_transfer': 'Virement bancaire',
  'mobile_payment': 'Paiement mobile',
  'amount_paid': 'Montant payé',
  'change': 'Monnaie',
  'complete_sale': 'Terminer la vente',
  'print_receipt': 'Imprimer le reçu',
  'download_receipt': 'Télécharger le reçu',
  'clear_cart': 'Vider le panier',
  'clear': 'Vider',
  'sale_completed': 'Vente complétée',
  'thank_you': 'Merci',
  'sale_success_message': 'La vente a été complétée avec succès',
  'invoice': 'Facture',
  'continue': 'Continuer',
  'payment': 'Paiement',
  'processing': 'Traitement en cours...',
  'complete_sale_error': 'Erreur lors de la finalisation de la vente',
  'cart_is_empty': 'Le panier est vide',
  'credit_payment_info': 'Le montant sera enregistré comme crédit pour ce client',
  'cart_empty': 'Panier vide',
  'view_sales': 'Voir les ventes',
  
  // POS specific
  'pos_data_load_error': 'Impossible de charger les données du POS',
  'credit_info_load_error': 'Erreur lors du chargement des informations de crédit',
  'credit_payment_recorded': 'Paiement de {amount} DH enregistré',
  'credit_payment_error': 'Erreur lors de l\'enregistrement du paiement',
  'order_loaded': 'Commande chargée',
  'order_loaded_description': 'Commande #{id} chargée dans le panier avec {count} articles',
  'order_load_error': 'Impossible de charger la commande',
  'product_added': 'Produit ajouté',
  'product_added_to_cart': '{name} ajouté au panier',
  'product_added_short': '{name} ajouté',
  'product_not_found': 'Produit non trouvé',
  'barcode_not_found': 'Aucun produit trouvé avec le code-barres: {barcode}',
  'last_item_voided': 'Dernier article annulé',
  'inventory_count': 'Comptage d\'inventaire',
  'overview': 'Aperçu',
  'record_payment': 'Enregistrer Paiement',
  'history': 'Historique',
  'current_balance': 'Solde actuel',
  'insufficient_amount': 'Montant insuffisant',
  'insufficient_amount_desc': '{amount} DH < {required} DH requis',
  'invalid_amount': 'Montant invalide',
  'minimum_required': 'Minimum {amount} DH requis',
  'pos_order_number': 'N° Commande',
  'time': 'Heure',
  'amount': 'Montant',
  'credit_management': 'Gestion de Crédit',
  'credit_management_desc': 'Gérer le solde de crédit, les paiements et voir l\'historique des transactions',
  'loading_credit_info': 'Chargement des informations de crédit...',
  'payment_amount': 'Montant du Paiement',
  'current_status': 'Statut Actuel',

  // Customers
  'customer_created_successfully': 'Client créé avec succès',
  'customer_updated_successfully': 'Client mis à jour avec succès',
  'create_customer_error': 'Erreur lors de la création du client',
  'update_customer_error': 'Erreur lors de la mise à jour du client',
  'customers_load_error': 'Erreur lors du chargement des clients',
  'customer_name_required': 'Le nom du client est requis',
  'invalid_email': 'Email invalide',
  'search_customers': 'Rechercher des clients...',
  'results': 'résultats',
  'customers_results': '{count} résultat(s)',
  'no_customers_found': 'Aucun client trouvé',
  'credit_limit': 'Limite de crédit',
  'credit_balance': 'Solde de crédit',
  'owes': 'Doit',
  'edit_customer': 'Modifier le client',
  'customer_name': 'Nom du client',
  'customer_save_error': 'Échec de l\'enregistrement du client',
  'confirm_delete_customer': 'Voulez-vous vraiment supprimer « {name} » ?',
  'customer_deleted_successfully': 'Client supprimé avec succès',
  'credit_load_error': 'Échec du chargement des informations de crédit',
  'credit_no_customer_selected': 'Aucun client sélectionné',
  'credit_invalid_payment_amount': 'Veuillez entrer un montant de paiement valide supérieur à 0',
  'credit_payment_success': 'Paiement de {amount} enregistré. Nouveau solde : {balance}',
  'credit_payment_error': 'Échec du traitement du paiement : {message}',
  'unknown_error': 'Erreur inconnue',
  'credit_badge_owed': '{amount} dû',
  'manage_credit': 'Gérer le crédit',
  'adjust_search_prompt': 'Ajustez votre recherche',
  'add_first_customer_prompt': 'Ajoutez votre premier client pour commencer',
  'add_new_customer': 'Ajouter un nouveau client',
  'update_customer_description': 'Mettre à jour les informations du client',
  'create_customer_description': 'Saisissez les détails du nouveau client',
  'update_customer': 'Mettre à jour le client',
  'create_customer': 'Créer le client',
  'credit_management_title': 'Gestion du crédit - {name}',
  'available_credit': 'Crédit disponible',
  'after_payment': 'Après paiement',
  'credit_transaction_history': 'Historique des transactions de crédit',
  'balance_after': 'Solde après',
  'loading_transactions': 'Chargement des transactions...',
  'no_credit_transactions': 'Aucune transaction de crédit trouvée',
  'transaction_type_sale': 'Vente',
  'transaction_type_payment': 'Paiement',
  'transaction_type_adjustment': 'Ajustement',
  'optional_note_placeholder': 'Note optionnelle...',
  'credit_payment_reference': 'Paiement de crédit - {date}',
  'type': 'Type',

  // Suppliers
  'supplier_created_successfully': 'Fournisseur créé avec succès',
  'supplier_updated_successfully': 'Fournisseur mis à jour avec succès',
  'create_supplier_error': 'Erreur lors de la création du fournisseur',
  'update_supplier_error': 'Erreur lors de la mise à jour du fournisseur',
  'suppliers_load_error': 'Erreur lors du chargement des fournisseurs',
  'supplier_name_required': 'Le nom du fournisseur est requis',
  'search_suppliers': 'Rechercher des fournisseurs...',
  'suppliers_results': '{count} fournisseur(s)',
  'no_suppliers_found': 'Aucun fournisseur trouvé',
  'add_supplier': 'Ajouter un fournisseur',
  'edit_supplier': 'Modifier le fournisseur',
  'add_new_supplier': 'Ajouter un nouveau fournisseur',
  'update_supplier_description': 'Mettre à jour les informations du fournisseur',
  'create_supplier_description': 'Saisissez les détails du nouveau fournisseur',
  'update_supplier': 'Mettre à jour le fournisseur',
  'create_supplier': 'Créer le fournisseur',
  'supplier_name': 'Nom du fournisseur',
  'contact_person': 'Personne de contact',
  'search_orders': 'Rechercher des commandes...',
  'total_outstanding': 'Total en attente',
  'total_paid': 'Total payé',
  'total_orders_count': 'Nombre de commandes',
  'supplier_delete_confirm': 'Voulez-vous vraiment supprimer « {name} » ?',
  'supplier_deleted_successfully': 'Fournisseur supprimé avec succès',
  'supplier_save_error': 'Échec de l\'enregistrement du fournisseur',
  'adjust_search_suppliers': 'Ajustez votre recherche',
  'add_first_supplier_prompt': 'Ajoutez votre premier fournisseur pour commencer',
  'total_orders': 'Total des commandes',
  'total_value': 'Valeur totale',
  'paid_amount': 'Payé',
  'outstanding': 'En attente',
  'purchase_orders': 'Bons de commande',
  'create_purchase_order': 'Créer un bon de commande',
  'warehouse': 'Entrepôt',
  'select_warehouse': 'Sélectionner un entrepôt',
  'unit_cost': 'Coût unitaire',
  'received_quantity': 'Quantité reçue',
  'loading_order_items': 'Chargement des articles de la commande...',
  'no_order_items': 'Aucun article trouvé pour cette commande.',
  'unknown': 'Inconnu',
  'offline_order_create_success': 'Bon de commande créé avec succès',
  'offline_order_create_error': 'Échec de la création du bon de commande : {message}',
  'offline_order_receive_success': 'Commande reçue et stock mis à jour',
  'offline_order_receive_error': 'Échec de la réception de la commande',
  'offline_order_delete_success': 'Commande supprimée avec succès',
  'offline_order_delete_error': 'Échec de la suppression de la commande',
  'offline_order_payment_update_error': 'Échec de la mise à jour des informations de paiement',
  'offline_order_payment_recorded': 'Paiement de {amount} enregistré',
  'offline_order_payment_error': 'Échec de l\'enregistrement du paiement',
  'order_payment_note': 'Paiement pour la commande {order}',
  'purchase_order_received_reason': 'Commande fournisseur reçue',
  'make_payment': 'Enregistrer un paiement',
  'pay_full_amount': 'Payer le montant total',
  'due': 'À payer',
  'order_details': 'Détails de la commande',
  'order_information': 'Informations sur la commande',
  'supplier_and_warehouse': 'Fournisseur et entrepôt',
  'order_number_label': 'Commande #',
  'order_date_label': 'Date de commande',
  'received_date_label': 'Date de réception',
  'notes_label': 'Notes',
  'total_amount': 'Montant total',
  'payment_status_paid': 'Payée',
  'payment_status_partial': 'Partielle',
  'payment_status_unpaid': 'Impayée',
  'order_status_draft': 'Brouillon',
  'order_status_pending': 'En attente',
  'order_status_ordered': 'Commandée',
  'order_status_received': 'Reçue',
  'order_status_cancelled': 'Annulée',
  'mark_as_ordered': 'Marquer comme commandée',
  'receive_order': 'Réceptionner la commande',
  'view_details': 'Voir les détails',
  'delete_order': 'Supprimer la commande',
  'delete_order_title': 'Supprimer la commande',
  'delete_order_description': 'Voulez-vous supprimer la commande {orderNumber} ? Cette action est irréversible.',
  'order_not_found': 'Commande introuvable',
  'payment_details_order': 'Commande :',
  'payment_details_total': 'Total :',
  'payment_details_paid': 'Payé :',
  'payment_details_due': 'Restant :',
  'bank_check': 'Chèque bancaire',
  'primary_location_badge': '(Principal)',
  'orders_module_title': 'Module Commandes',
  'orders_module_description': 'Cette page hors ligne simplifiée permet de gérer les commandes fournisseurs.',
  'orders_module_point_create': 'Créer des commandes fournisseurs',
  'orders_module_point_track': 'Suivre le statut et la livraison',
  'orders_module_point_manage': 'Gérer les articles et les quantités',
  'orders_module_point_update': 'Mettre à jour le stock lors de la réception',
  'no_orders_created': 'Aucune commande créée pour le moment',
  'active_orders_count': '{count} commande(s) actives',
  'available_suppliers': 'Fournisseurs disponibles',
  'available_products': 'Produits disponibles',
  'order_notes_placeholder': 'Notes de commande (facultatif)',
  'payment_information': 'Informations de paiement',
  'credit_pay_later': 'Crédit (payer plus tard)',
  'amount_paid': 'Montant payé',
  'order_summary': 'Résumé de la commande',

  // Reports
  'reports_title': 'Rapports et analyses',
  'reports_export': 'Exporter le rapport',
  'reports_select_type_placeholder': 'Sélectionner un type de rapport',
  'reports_type_overview': 'Vue d’ensemble',
  'reports_type_sales': 'Rapport des ventes',
  'reports_type_inventory': 'Rapport d’inventaire',
  'reports_type_customers': 'Rapport clients',
  'reports_select_range_placeholder': 'Sélectionner une période',
  'reports_range_7_days': '7 derniers jours',
  'reports_range_30_days': '30 derniers jours',
  'reports_range_90_days': '90 derniers jours',
  'reports_range_year': 'Dernière année',
  'reports_total_revenue': 'Revenu total',
  'reports_total_revenue_desc': '{count} transaction(s)',
  'reports_avg_transaction': 'Transaction moyenne',
  'reports_avg_transaction_desc': 'Moyenne par vente',
  'reports_total_customers': 'Clients totaux',
  'reports_total_customers_desc': 'Clients enregistrés',
  'reports_products_card': 'Produits',
  'reports_products_low_stock': '{count} en stock faible',
  'reports_sales_overview': 'Vue d’ensemble des ventes',
  'reports_total_sales': 'Ventes totales',
  'reports_transactions': 'Transactions',
  'reports_average_sale': 'Vente moyenne',
  'reports_inventory_status': 'Statut de l’inventaire',
  'reports_total_products': 'Produits totaux',
  'reports_low_stock_items': 'Articles en stock faible',
  'reports_stock_health': 'État du stock',
  'reports_stock_health_good': 'Bon',
  'reports_stock_health_attention': 'À surveiller',
  'reports_module_title': 'Module Rapports',
  'reports_module_desc': 'Page hors ligne simplifiée affichant des métriques de base à partir de vos données.',
  'reports_module_point_charts': 'Graphiques et tableaux interactifs',
  'reports_module_point_sales': 'Analyse détaillée des ventes par date, produit, client',
  'reports_module_point_inventory': 'Rapports de rotation des stocks',
  'reports_module_point_profit': 'Analyse des marges bénéficiaires',
  'reports_module_point_export': 'Export en PDF/Excel',
  'reports_module_point_filters': 'Filtres et plages de dates personnalisables',

  // Inventory Counts
  'inventory_counts_title': 'Comptages d\'inventaire',
  'inventory_count_create_new': 'Nouveau comptage',
  'inventory_count_dialog_title': 'Créer un nouveau comptage',
  'inventory_count_dialog_description': 'Configurez un nouveau comptage pour suivre votre stock avec précision.',
  'inventory_count_required_fields': 'Veuillez remplir tous les champs obligatoires.',
  'inventory_count_name_label': 'Nom du comptage *',
  'inventory_count_name_placeholder': 'ex. Comptage mensuel - Magasin principal',
  'inventory_count_location_label': 'Emplacement *',
  'inventory_count_location_placeholder': 'Sélectionner un emplacement',
  'inventory_count_description_placeholder': 'Description optionnelle',
  'inventory_count_create_button': 'Créer le comptage',
  'inventory_count_card_description': 'Emplacement : {location} • Progression : {progress}%',
  'inventory_count_unknown_location': 'Emplacement inconnu',
  'inventory_count_start_button': 'Démarrer le comptage',
  'inventory_count_continue_button': 'Continuer le comptage',
  'inventory_count_view_results': 'Voir les résultats',
  'inventory_count_delete_title': 'Supprimer le comptage',
  'inventory_count_delete_description': 'Voulez-vous vraiment supprimer « {name} » ? Cette action est irréversible.',
  'inventory_count_back': '← Retour aux comptages',
  'inventory_count_status_draft': 'Brouillon',
  'inventory_count_status_in_progress': 'En cours',
  'inventory_count_status_completed': 'Terminé',
  'inventory_count_location_display': 'Emplacement : {location}',
  'inventory_count_complete_button': 'Terminer le comptage ({progress}%)',
  'inventory_count_search_placeholder': 'Rechercher des produits...',
  'inventory_count_barcode_placeholder': 'Scanner ou saisir un code-barres...',
  'inventory_count_expected': 'Attendu',
  'inventory_count_actual': 'Réel',
  'inventory_count_not_counted': 'Non compté',
  'inventory_count_counted': 'Compté',
  'inventory_count_count_action': 'Compter',
  'inventory_count_remaining_items': 'Veuillez compter tous les articles. {count} restant(s).',
  'inventory_count_complete_success': 'Comptage terminé ! Les quantités ont été mises à jour.',
  'inventory_count_complete_error': 'Échec de la finalisation du comptage.',
  'inventory_count_create_success': 'Comptage créé avec succès.',
  'inventory_count_create_error': 'Échec de la création du comptage.',
  'inventory_count_delete_success': 'Comptage supprimé avec succès.',
  'inventory_count_delete_error': 'Échec de la suppression du comptage.',
  'inventory_count_update_error': 'Échec de la mise à jour de l\'article du comptage.',
  'inventory_count_product_missing': 'Produit introuvable dans ce comptage.',
  'inventory_count_product_barcode_missing': 'Aucun produit trouvé avec ce code-barres.',
  
  // Dashboard
  'total_products': 'Total Produits',
  'active_inventory_items': 'Articles d\'inventaire actifs',
  'registered_customers': 'Clients enregistrés',
  'total_sales': 'Total Ventes',
  'completed_transactions': 'Transactions complétées',
  'revenue': 'Chiffre d\'affaires',
  'total_sales_revenue': 'Chiffre d\'affaires total',
  'dashboard_low_stock_alert': 'Alerte Stock Bas',
  'low_stock_message': '{count} produit{count > 1 ? "s" : ""} en rupture de stock.',
  'check_inventory_reorder': 'Vérifiez votre inventaire pour recommander.',
  'recent_sales': 'Ventes Récentes',
  'no_sales_recorded': 'Aucune vente enregistrée pour le moment',
  'low_stock_products': 'Produits en Stock Bas',
  'all_products_well_stocked': 'Tous les produits sont bien approvisionnés',
  'categorized': 'Catégorisé',
  'uncategorized': 'Non catégorisé',
  'min': 'Min',
  
  // Products
  'product_created_successfully': 'Produit créé avec succès',
  'failed_to_create_product': 'Échec de la création du produit',
  'unknown_category': 'Catégorie inconnue',
  'image_size_limit': 'La taille de l\'image doit être inférieure à 5 Mo',
  'select_valid_image': 'Veuillez sélectionner un fichier image valide',
  'product_updated_successfully': 'Produit mis à jour avec succès',
  'failed_to_update_product': 'Échec de la mise à jour du produit',
  'product_deleted_successfully': 'Produit supprimé avec succès',
  'failed_to_delete_product': 'Échec de la suppression du produit',
  'category_deleted_successfully': 'Catégorie supprimée avec succès',
  'failed_to_delete_category': 'Échec de la suppression de la catégorie',
  'category_updated_successfully': 'Catégorie mise à jour avec succès',
  'failed_to_update_category': 'Échec de la mise à jour de la catégorie',
  'category_created_successfully': 'Catégorie créée avec succès',
  'failed_to_create_category': 'Échec de la création de la catégorie',
  'products_and_categories': 'Produits et Catégories',
  'manage_categories': 'Gérer les Catégories',
  'filter_by_category': 'Filtrer par catégorie',
  'add_category': 'Ajouter une Catégorie',
  'search_products': 'Rechercher des produits...',
  'price': 'Prix',
  'stock': 'Stock',
  'barcode': 'Code-barres',
  'product_name': 'Nom du produit',
  'description': 'Description',
  'category': 'Catégorie',
  'select_category': 'Sélectionner une catégorie',
  'no_category': 'Aucune catégorie',
  'cost_price': 'Prix de revient',
  'selling_price': 'Prix de vente',
  'semi_wholesale_price_optional': 'Prix semi-gros (Optionnel)',
  'wholesale_price_optional': 'Prix de gros (Optionnel)',
  'quantity': 'Quantité',
  'min_stock_level': 'Niveau de stock minimum',
  'unit': 'Unité',
  'product_image': 'Image du produit',
  'upload_product_image': 'Télécharger l\'image du produit',
  'choose_image': 'Choisir une image',
  'cancel': 'Annuler',
  'create': 'Créer',
  'update': 'Mettre à jour',
  'upload_category_image': 'Télécharger l\'image de la catégorie',
  'edit_category': 'Modifier la Catégorie',
  'category_name': 'Nom de la catégorie',
  'category_image': 'Image de la catégorie',
  
  // Inventory
  'location_name_required': 'Le nom de l\'emplacement est requis',
  'stock_location_updated': 'Emplacement de stock mis à jour avec succès',
  'stock_location_created': 'Emplacement de stock créé avec succès',
  'failed_to_save_location': 'Échec de l\'enregistrement de l\'emplacement de stock',
  'inventory_management': 'Gestion des Stocks',
  'inventory_value': 'Valeur du Stock',
  'low_stock_items': 'Articles en Stock Bas',
  'active_products_in_inventory': 'Produits actifs en inventaire',
  'total_cost_value_of_stock': 'Valeur totale du coût du stock',
  'items_below_minimum_level': 'Articles en dessous du niveau minimum',
  'current_stock': 'Stock Actuel',
  'min_level': 'Niveau Min',
  'stock_value': 'Valeur du Stock',
  'actions': 'Actions',
  'low_stock': 'Stock Bas',
  'in_stock': 'En Stock',
  'edit_stock_location': 'Modifier l\'Emplacement de Stock',
  'add_new_stock_location': 'Ajouter un Nouvel Emplacement de Stock',
  'location_name': 'Nom de l\'Emplacement',
  'address': 'Adresse',
  'set_as_primary_location': 'Définir comme Emplacement Principal',
  'location_actions': 'Actions de l\'Emplacement',
  'manage_this_stock_location': 'Gérer cet emplacement de stock',
  'adjust_stock': 'Ajuster le Stock',
  'adjustment_quantity': 'Quantité d\'Ajustement',
  'new_stock_level': 'Nouveau Niveau de Stock',
  'reason_optional': 'Raison (Optionnel)',
  'apply_adjustment': 'Appliquer l\'Ajustement',
  'select_location': 'Sélectionner un emplacement',
  'all_locations': 'Tous les emplacements',
  'add_location': 'Ajouter un emplacement',
  'adjustment_reason_placeholder': 'ex. Correction de stock, Marchandises endommagées, etc.',
  'select_source_location': 'Sélectionner l\'emplacement source',
  'select_destination_location': 'Sélectionner l\'emplacement de destination',
  'select_reason_optional': 'Sélectionner une raison (optionnel)',
  'location_name_placeholder': 'ex. Magasin principal, Entrepôt A',
  'location_description_placeholder': 'Brève description de cet emplacement',
  'physical_address_placeholder': 'Adresse physique',
  
  // Sales History
  'sales_list': 'Liste des ventes',
  'invoice_number': 'Numéro de facture',
  'customer_filter': 'Filtrer par client',
  'date_filter': 'Filtrer par date',
  'all_customers': 'Tous les clients',
  'cash_customer': 'Client en espèces',
  'no_sales_found': 'Aucune vente trouvée',
  'sale_details': 'Détails de la vente',
  'product': 'Produit',
  'view_invoice': 'Voir la facture',
  'download_invoice': 'Télécharger la facture',
  'all_time': 'Tout',
  'today': 'Aujourd\'hui',
  'yesterday': 'Hier',
  'this_week': 'Cette semaine',
  'last_7_days': 'Les 7 derniers jours',
  'this_month': 'Ce mois-ci',
  'last_30_days': 'Les 30 derniers jours',
  'actions': 'Actions',
  'offline_sales_history_title': 'Historique des ventes',
  'offline_sales_export': 'Exporter en CSV',
  'offline_sales_total_sales': 'Ventes totales',
  'offline_sales_total_sales_desc': '{count} transaction(s)',
  'offline_sales_transactions': 'Transactions',
  'offline_sales_transactions_desc': 'Ventes complétées',
  'offline_sales_average_sale': 'Vente moyenne',
  'offline_sales_average_sale_desc': 'Par transaction',
  'offline_sales_search_placeholder': 'Recherche par numéro de facture ou client…',
  'offline_sales_status_filter_placeholder': 'Filtrer par statut',
  'offline_sales_payment_filter_placeholder': 'Filtrer par paiement',
  'offline_sales_status_all': 'Tous les statuts',
  'offline_sales_payment_all': 'Tous les modes de paiement',
  'offline_sales_no_results_filters': 'Ajustez vos filtres pour affiner la recherche',
  'offline_sales_no_results_empty': 'Aucune vente n’a encore été enregistrée',
  'offline_sales_info_section': 'Informations sur la vente',
  'offline_sales_items_section': 'Articles',
  'offline_sales_print_receipt': 'Imprimer le reçu',
  'offline_sales_printer_not_ready_title': 'Imprimante non prête',
  'offline_sales_printer_not_ready_desc': 'Veuillez configurer et connecter votre imprimante thermique dans les paramètres',
  'offline_sales_print_success': 'Reçu imprimé avec succès',
  'offline_sales_print_error_title': 'Erreur d’impression',
  'offline_sales_print_error_desc': 'Impossible d’imprimer le reçu. Vérifiez la connexion de l’imprimante.',
  'offline_sales_export_success': 'Données de ventes exportées avec succès',
  'walk_in_customer': 'Client de passage',
  'unknown_customer': 'Client inconnu',
  'sale_status_completed': 'Terminée',
  'sale_status_pending': 'En attente',
  'sale_status_cancelled': 'Annulée',
  'card_payment': 'Carte',
  'unit_price': 'Prix unitaire',
  'change_amount': 'Monnaie rendue',

  // Users management
  'users': 'Utilisateurs',
  'user_management': 'Gestion des utilisateurs',
  'user_management_description': 'Gérez les comptes utilisateurs et leurs accès',
  'new_user': 'Nouvel utilisateur',
  'add_user': 'Ajouter un utilisateur',
  'edit_user': 'Modifier l\'utilisateur',
  'user_management_show_pins': 'Afficher PINs',
  'user_management_hide_pins': 'Masquer PINs',
  'user_management_required_fields': 'Champs requis',
  'user_management_required_fields_message': 'Veuillez remplir tous les champs obligatoires',
  'user_management_invalid_pin': 'PIN invalide',
  'user_management_invalid_pin_message': 'Le PIN doit contenir exactement 4 chiffres',
  'user_management_create_success': 'L\'utilisateur {name} a été créé avec succès',
  'user_management_update_success': 'L\'utilisateur {name} a été mis à jour avec succès',
  'name': 'Nom',
  'full_name': 'Nom complet',
  'email': 'Email',
  'phone': 'Téléphone',
  'role': 'Rôle',
  'status': 'Statut',
  'active': 'Actif',
  'inactive': 'Inactif',
  'admin': 'Administrateur',
  'cashier': 'Caissier',
  'merchant': 'Commerçant',
  'supporter': 'Support',
  'viewer': 'Observateur',
  'business_name': 'Nom de l\'entreprise',
  'username_placeholder': 'nom_utilisateur',
  'full_name_placeholder': 'Nom Prénom',
  'pin': 'PIN',
  'pin_code_label': 'Code PIN (4 chiffres)',
  'pin_placeholder': '0000',
  'active_account': 'Compte actif',
  'search_users': 'Rechercher des utilisateurs',
  'no_users': 'Aucun utilisateur trouvé',
  'no_users_found': 'Aucun utilisateur ne correspond à votre recherche',
  'create_first_user': 'Créer le premier utilisateur',
  'select_role': 'Sélectionner un rôle',
  'role_description': 'Le rôle détermine les permissions de l\'utilisateur dans le système.',
  'active_description': 'Les utilisateurs inactifs ne peuvent pas se connecter au système.',
  'deactivate': 'Désactiver',
  'activate': 'Activer',
  'confirm_delete_user': 'Êtes-vous sûr de vouloir supprimer cet utilisateur ?',
  'user_created': 'Utilisateur créé avec succès',
  'user_updated': 'Utilisateur mis à jour avec succès',
  'user_deleted': 'Utilisateur supprimé avec succès',
  'create_user_error': 'Erreur lors de la création de l\'utilisateur',
  'update_user_error': 'Erreur lors de la mise à jour de l\'utilisateur',
  'delete_user_error': 'Erreur lors de la suppression de l\'utilisateur',
  'creating': 'Création en cours...',
  'saving': 'Enregistrement...',
  'users_admin_only': 'Seuls les administrateurs peuvent gérer les utilisateurs',
  'users_load_error': 'Erreur lors du chargement des utilisateurs',
  'access_denied': 'Accès refusé',

  // Offline settings
  'offline_settings_updated': 'Paramètres mis à jour avec succès',
  'offline_settings_update_error': 'Échec de la mise à jour des paramètres',
  'offline_settings_tab_business': 'Entreprise',
  'offline_settings_tab_financial': 'Financier',
  'offline_settings_tab_notifications': 'Notifications',
  'offline_settings_tab_appearance': 'Apparence',
  'offline_settings_tab_printing': 'Impression',
  'offline_settings_business_title': 'Informations sur l\'entreprise',
  'offline_settings_business_desc': 'Informations de base sur votre entreprise',
  'offline_settings_business_name': 'Nom de l\'entreprise',
  'offline_settings_address': 'Adresse',
  'offline_settings_phone': 'Téléphone',
  'offline_settings_email': 'Email',
  'offline_settings_financial_title': 'Paramètres financiers',
  'offline_settings_financial_desc': 'Devise, taxes et paramètres de tarification',
  'offline_settings_currency_label': 'Devise',
  'offline_settings_currency_placeholder': 'Choisir une devise',
  'offline_settings_currency_usd': 'USD - Dollar américain',
  'offline_settings_currency_eur': 'EUR - Euro',
  'offline_settings_currency_gbp': 'GBP - Livre sterling',
  'offline_settings_currency_cad': 'CAD - Dollar canadien',
  'offline_settings_currency_aud': 'AUD - Dollar australien',
  'offline_settings_currency_jpy': 'JPY - Yen japonais',
  'offline_settings_tax_rate': 'Taux de taxe (%)',
  'offline_settings_low_stock_threshold': 'Seuil de stock bas',
  'offline_settings_notifications_title': 'Paramètres de notification',
  'offline_settings_notifications_desc': 'Gérer les alertes et notifications',
  'offline_settings_enable_notifications': 'Activer les notifications',
  'offline_settings_enable_notifications_desc': 'Recevoir les notifications générales de l\'application',
  'offline_settings_low_stock_alerts': 'Alertes de stock bas',
  'offline_settings_low_stock_alerts_desc': 'Être averti lorsque les produits sont en rupture',
  'offline_settings_auto_backup': 'Sauvegarde automatique',
  'offline_settings_auto_backup_desc': 'Sauvegarder automatiquement les données en stockage local',
  'offline_settings_appearance_title': 'Paramètres d\'apparence',
  'offline_settings_appearance_desc': 'Personnalisez l\'apparence de l\'application',
  'offline_settings_theme_label': 'Thème',
  'offline_settings_theme_placeholder': 'Choisir un thème',
  'offline_settings_theme_light': 'Clair',
  'offline_settings_theme_dark': 'Sombre',
  'offline_settings_theme_system': 'Système',
  'offline_settings_language_label': 'Langue',
  'offline_settings_language_placeholder': 'Choisir une langue',
  'offline_settings_language_en': 'Anglais',
  'offline_settings_language_es': 'Espagnol',
  'offline_settings_language_fr': 'Français',
  'offline_settings_language_de': 'Allemand',
  'offline_settings_language_it': 'Italien',
  'offline_settings_language_pt': 'Portugais',
  'offline_settings_printing_title': 'Configuration de l\'imprimante thermique',
  'offline_settings_printing_desc': 'Configurez votre imprimante thermique USB pour l\'impression des reçus',
  'offline_settings_save_button': 'Enregistrer les paramètres',
  'offline_settings_business_name_required': 'Le nom de l\'entreprise est requis',
  'offline_settings_currency_required': 'La devise est requise',
  'offline_settings_tax_rate_range': 'Le taux de taxe doit être compris entre 0 et 100',
  'offline_settings_low_stock_positive': 'Le seuil de stock bas doit être positif',
  'offline_settings_language_required': 'La langue est requise',
  'offline_settings_theme_required': 'Le thème est requis',
  
  // Orders
  'all_statuses': 'Tous les statuts',
  'status_filter': 'Filtrer par statut',
  'supplier_filter': 'Filtrer par fournisseur',
  'all_suppliers': 'Tous les fournisseurs',
  'order_list': 'Liste des commandes',
  'order_number': 'Numéro de commande',
  'date': 'Date',
  'supplier': 'Fournisseur',
  'create_order': 'Créer une commande',
  'new_order': 'Nouvelle commande',
  'no_orders_found': 'Aucune commande trouvée',
  'create_first_order': 'Créer votre première commande',
  'orders_admin_only': 'Seuls les administrateurs peuvent gérer les commandes',
  'orders_load_error': 'Erreur lors du chargement des commandes',
  'unknown_supplier': 'Fournisseur inconnu',
  'unknown_product': 'Produit inconnu',
  'order_created': 'Commande créée avec succès',
  'order_updated': 'Commande mise à jour avec succès',
  'create_order_error': 'Erreur lors de la création de la commande',
  'update_order_error': 'Erreur lors de la mise à jour de la commande',
  'select_supplier': 'Sélectionner un fournisseur',
  'select_product': 'Sélectionner un produit',
  'pending': 'En attente',
  'in_transit': 'En transit',
  'received': 'Reçue',
  'cancelled': 'Annulée',
  'update_status': 'Mettre à jour',
  'notes': 'Notes',
  'order_items': 'Articles commandés',
  'retry': 'Réessayer',
  
  // Common actions
  'search': 'Rechercher',
  'add': 'Ajouter',
  'edit': 'Modifier',
  'delete': 'Supprimer',
  'close': 'Fermer',
  'confirm': 'Confirmer',
  'loading': 'Chargement...',
  'no_results': 'Aucun résultat trouvé',
  'error': 'Erreur',
  'success': 'Succès',
  'required_field': 'Ce champ est obligatoire',
  'invalid_format': 'Format invalide',
  'create': 'Créer',
  
  // Units
  'piece': 'pièce',
  'kg': 'kg',
  'liter': 'litre',
  'box': 'boîte',
  'pack': 'pack',
  
  // Currencies
  'currency': 'MAD',
};

// Arabic translations
const arTranslations: TranslationDictionary = {
  // App shell
  'dashboard': 'لوحة التحكم',
  'pos': 'نقطة البيع',
  'products': 'المنتجات',
  'inventory': 'المخزون',
  'customers': 'العملاء',
  'suppliers': 'الموردين',
  'orders': 'الطلبات',
  'reports': 'التقارير',
  'sales_history': 'سجل المبيعات',
  'settings': 'الإعدادات',
  'language_fr': 'Français',
  'language_ar': 'العربية',
  'logout': 'تسجيل الخروج',
  'offline_mode': 'وضع عدم الاتصال',
  
  // Auth
  'login': 'تسجيل الدخول',
  'username': 'اسم المستخدم',
  'password': 'كلمة المرور',
  'login_button': 'دخول',
  'login_error': 'اسم المستخدم أو كلمة المرور غير صحيحة',
  
  // Dashboard
  'last_sync': 'آخر مزامنة',
  'sync_now': 'مزامنة الآن',
  'daily_sales': 'مبيعات اليوم',
  'low_stock_alert': 'تنبيه المخزون',
  'products_count': 'منتج',
  'view_details': 'عرض التفاصيل',
  'vs_yesterday': 'مقارنة بالأمس',
  'popular_products': 'المنتجات الشائعة',
  'sold_today': 'مباع اليوم',
  'in_stock': 'متوفر',
  'low_stock': 'مخزون منخفض',
  'out_of_stock': 'نفذ من المخزون',
  'recent_activities': 'النشاطات الحديثة',
  'sale': 'بيع',
  'order': 'طلب',
  'adjustment': 'تعديل',
  'minutes_ago': 'منذ {0} دقائق',
  'hours_ago': 'منذ {0} ساعات',
  'stock_added': 'تمت إضافة مخزون',
  'items': 'عناصر',
  'receipt_from_supplier': 'استلام من المورد',
  'stock_level_alert': 'تنبيه مستوى المخزون',
  'products_below_threshold': 'منتجات أقل من الحد الأدنى',
  
  // Products
  'add_product': 'إضافة منتج',
  'edit_product': 'تعديل المنتج',
  'delete_product': 'حذف المنتج',
  'product_name': 'اسم المنتج',
  'barcode': 'الباركود',
  'category': 'الفئة',
  'cost_price': 'سعر التكلفة',
  'selling_price': 'سعر البيع',
  'quantity': 'الكمية',
  'min_stock_level': 'الحد الأدنى للمخزون',
  'unit': 'الوحدة',
  'save': 'حفظ',
  'cancel': 'إلغاء',
  'search_products': 'البحث عن منتجات',
  'scan_barcode': 'مسح الباركود',
  'filters': 'تصفية',
  'all_categories': 'جميع الفئات',
  'price': 'السعر',
  
  // Barcode scanner
  'scan_code': 'مسح الباركود',
  'place_barcode': 'ضع الباركود داخل الإطار للمسح التلقائي.',
  'toggle_flash': 'تشغيل الفلاش',
  'enter_manually': 'إدخال يدوي',
  
  // POS
  'point_of_sale': 'نقطة البيع',
  'cart': 'سلة التسوق',
  'add_item': 'إضافة عنصر',
  'customer': 'العميل',
  'select_customer': 'اختر العميل',
  'add_customer': 'إضافة عميل',
  'subtotal': 'المجموع الفرعي',
  'discount': 'خصم',
  'total': 'المجموع',
  'payment_method': 'طريقة الدفع',
  'cash': 'نقدا',
  'credit': 'دين',
  'bank_transfer': 'تحويل بنكي',
  'mobile_payment': 'دفع عبر الموبايل',
  'amount_paid': 'المبلغ المدفوع',
  'change': 'الباقي',
  'complete_sale': 'إتمام البيع',
  'print_receipt': 'طباعة الإيصال',
  'download_receipt': 'تحميل الإيصال',
  'clear_cart': 'تفريغ السلة',
  'clear': 'مسح',
  'sale_completed': 'تمت عملية البيع',
  'thank_you': 'شكراً لك',
  'sale_success_message': 'تمت عملية البيع بنجاح',
  'invoice': 'فاتورة',
  'continue': 'متابعة',
  'payment': 'الدفع',
  'processing': 'جاري المعالجة...',
  'complete_sale_error': 'خطأ في إتمام البيع',
  'cart_is_empty': 'سلة المشتريات فارغة',
  'credit_payment_info': 'سيتم تسجيل المبلغ كدين لهذا العميل',
  'cart_empty': 'السلة فارغة',
  'view_sales': 'عرض المبيعات',

  // Users management
  'users': 'المستخدمون',
  'user_management': 'إدارة المستخدمين',
  'user_management_description': 'قم بإدارة حسابات المستخدمين وصلاحياتهم',
  'new_user': 'مستخدم جديد',
  'add_user': 'إضافة مستخدم',
  'edit_user': 'تعديل المستخدم',
  'user_management_show_pins': 'إظهار رموز PIN',
  'user_management_hide_pins': 'إخفاء رموز PIN',
  'user_management_required_fields': 'حقول مطلوبة',
  'user_management_required_fields_message': 'يرجى ملء جميع الحقول المطلوبة',
  'user_management_invalid_pin': 'رمز PIN غير صالح',
  'user_management_invalid_pin_message': 'يجب أن يتكون رمز PIN من 4 أرقام بالضبط',
  'user_management_create_success': 'تم إنشاء المستخدم {name} بنجاح',
  'user_management_update_success': 'تم تحديث المستخدم {name} بنجاح',
  'name': 'الاسم',
  'full_name': 'الاسم الكامل',
  'email': 'البريد الإلكتروني',
  'phone': 'الهاتف',
  'role': 'الدور',
  'status': 'الحالة',
  'active': 'نشط',
  'inactive': 'غير نشط',
  'admin': 'مسؤول',
  'cashier': 'أمين صندوق',
  'merchant': 'تاجر',
  'supporter': 'دعم',
  'viewer': 'مشاهد',
  'business_name': 'اسم النشاط',
  'username_placeholder': 'اسم المستخدم',
  'full_name_placeholder': 'الاسم الكامل',
  'pin': 'رمز PIN',
  'pin_code_label': 'رمز PIN (4 أرقام)',
  'pin_placeholder': '0000',
  'active_account': 'حساب نشط',
  'search_users': 'ابحث عن المستخدمين',
  'no_users': 'لم يتم العثور على مستخدمين',
  'no_users_found': 'لا يوجد مستخدم مطابق لبحثك',
  'create_first_user': 'أنشئ أول مستخدم',
  'select_role': 'اختر الدور',
  'role_description': 'الدور يحدد صلاحيات المستخدم في النظام.',
  'active_description': 'المستخدمون غير النشطين لا يمكنهم تسجيل الدخول إلى النظام.',
  'deactivate': 'تعطيل',
  'activate': 'تفعيل',
  'confirm_delete_user': 'هل أنت متأكد أنك تريد حذف هذا المستخدم؟',
  'user_created': 'تم إنشاء المستخدم بنجاح',
  'user_updated': 'تم تحديث المستخدم بنجاح',
  'user_deleted': 'تم حذف المستخدم بنجاح',
  'create_user_error': 'خطأ أثناء إنشاء المستخدم',
  'update_user_error': 'خطأ أثناء تحديث المستخدم',
  'delete_user_error': 'خطأ أثناء حذف المستخدم',
  'creating': 'جارٍ الإنشاء...',
  'saving': 'جارٍ الحفظ...',
  'users_admin_only': 'فقط المسؤولون يمكنهم إدارة المستخدمين',
  'users_load_error': 'حدث خطأ أثناء تحميل المستخدمين',
  'access_denied': 'تم رفض الوصول',

  // Offline settings
  'offline_settings_updated': 'تم تحديث الإعدادات بنجاح',
  'offline_settings_update_error': 'فشل في تحديث الإعدادات',
  'offline_settings_tab_business': 'النشاط التجاري',
  'offline_settings_tab_financial': 'المالية',
  'offline_settings_tab_notifications': 'الإشعارات',
  'offline_settings_tab_appearance': 'المظهر',
  'offline_settings_tab_printing': 'الطباعة',
  'offline_settings_business_title': 'معلومات النشاط',
  'offline_settings_business_desc': 'معلومات أساسية عن نشاطك التجاري',
  'offline_settings_business_name': 'اسم النشاط',
  'offline_settings_address': 'العنوان',
  'offline_settings_phone': 'الهاتف',
  'offline_settings_email': 'البريد الإلكتروني',
  'offline_settings_financial_title': 'الإعدادات المالية',
  'offline_settings_financial_desc': 'العملة والضرائب وإعدادات التسعير',
  'offline_settings_currency_label': 'العملة',
  'offline_settings_currency_placeholder': 'اختر العملة',
  'offline_settings_currency_usd': 'USD - دولار أمريكي',
  'offline_settings_currency_eur': 'EUR - يورو',
  'offline_settings_currency_gbp': 'GBP - جنيه إسترليني',
  'offline_settings_currency_cad': 'CAD - دولار كندي',
  'offline_settings_currency_aud': 'AUD - دولار أسترالي',
  'offline_settings_currency_jpy': 'JPY - ين ياباني',
  'offline_settings_tax_rate': 'نسبة الضريبة (%)',
  'offline_settings_low_stock_threshold': 'حد انخفاض المخزون',
  'offline_settings_notifications_title': 'إعدادات الإشعارات',
  'offline_settings_notifications_desc': 'إدارة التنبيهات والإشعارات',
  'offline_settings_enable_notifications': 'تفعيل الإشعارات',
  'offline_settings_enable_notifications_desc': 'استلام إشعارات التطبيق العامة',
  'offline_settings_low_stock_alerts': 'تنبيهات انخفاض المخزون',
  'offline_settings_low_stock_alerts_desc': 'تلقي تنبيهات عند قرب نفاد المنتجات',
  'offline_settings_auto_backup': 'نسخ احتياطي تلقائي',
  'offline_settings_auto_backup_desc': 'نسخ البيانات احتياطياً تلقائياً إلى التخزين المحلي',
  'offline_settings_appearance_title': 'إعدادات المظهر',
  'offline_settings_appearance_desc': 'خصص مظهر التطبيق',
  'offline_settings_theme_label': 'السمة',
  'offline_settings_theme_placeholder': 'اختر السمة',
  'offline_settings_theme_light': 'فاتح',
  'offline_settings_theme_dark': 'داكن',
  'offline_settings_theme_system': 'افتراضي النظام',
  'offline_settings_language_label': 'اللغة',
  'offline_settings_language_placeholder': 'اختر اللغة',
  'offline_settings_language_en': 'الإنجليزية',
  'offline_settings_language_es': 'الإسبانية',
  'offline_settings_language_fr': 'الفرنسية',
  'offline_settings_language_de': 'الألمانية',
  'offline_settings_language_it': 'الإيطالية',
  'offline_settings_language_pt': 'البرتغالية',
  'offline_settings_printing_title': 'إعداد الطابعة الحرارية',
  'offline_settings_printing_desc': 'اضبط طابعتك الحرارية USB لطباعة الإيصالات',
  'offline_settings_save_button': 'حفظ الإعدادات',
  'offline_settings_business_name_required': 'اسم النشاط مطلوب',
  'offline_settings_currency_required': 'العملة مطلوبة',
  'offline_settings_tax_rate_range': 'يجب أن تكون نسبة الضريبة بين 0 و 100',
  'offline_settings_low_stock_positive': 'يجب أن يكون حد انخفاض المخزون قيمة موجبة',
  'offline_settings_language_required': 'اللغة مطلوبة',
  'offline_settings_theme_required': 'السمة مطلوبة',

  // POS specific
  'pos_data_load_error': 'تعذر تحميل بيانات نقطة البيع',
  'credit_info_load_error': 'خطأ في تحميل معلومات الائتمان',
  'credit_payment_recorded': 'تم تسجيل دفعة {amount} درهم',
  'credit_payment_error': 'خطأ في تسجيل الدفعة',
  'order_loaded': 'تم تحميل الطلب',
  'order_loaded_description': 'تم تحميل الطلب #{id} في السلة مع {count} عنصر',
  'order_load_error': 'تعذر تحميل الطلب',
  'product_added': 'تمت إضافة المنتج',
  'product_added_to_cart': 'تمت إضافة {name} إلى السلة',
  'product_added_short': 'تمت إضافة {name}',
  'product_not_found': 'المنتج غير موجود',
  'barcode_not_found': 'لم يتم العثور على منتج بالباركود: {barcode}',
  'last_item_voided': 'تم إلغاء العنصر الأخير',
  'inventory_count': 'جرد المخزون',
  'overview': 'نظرة عامة',
  'record_payment': 'تسجيل الدفعة',
  'history': 'التاريخ',
  'current_balance': 'الرصيد الحالي',
  'insufficient_amount': 'مبلغ غير كافي',
  'insufficient_amount_desc': '{amount} درهم < {required} درهم مطلوب',
  'invalid_amount': 'مبلغ غير صحيح',
  'minimum_required': 'الحد الأدنى {amount} درهم',
  'pos_order_number': 'رقم الطلب',
  'time': 'الوقت',
  'amount': 'المبلغ',
  'credit_management': 'إدارة الائتمان',
  'credit_management_desc': 'إدارة رصيد الائتمان والمدفوعات وعرض تاريخ المعاملات',
  'loading_credit_info': 'تحميل معلومات الائتمان...',
  'payment_amount': 'مبلغ الدفعة',
  'current_status': 'الحالة الحالية',

  // Customers
  'customer_created_successfully': 'تم إنشاء العميل بنجاح',
  'customer_updated_successfully': 'تم تحديث العميل بنجاح',
  'create_customer_error': 'فشل في إنشاء العميل',
  'update_customer_error': 'فشل في تحديث العميل',
  'customers_load_error': 'حدث خطأ أثناء تحميل العملاء',
  'customer_name_required': 'اسم العميل مطلوب',
  'invalid_email': 'بريد إلكتروني غير صالح',
  'search_customers': 'ابحث عن العملاء...',
  'results': 'نتائج',
  'customers_results': '{count} نتيجة',
  'no_customers_found': 'لم يتم العثور على عملاء',
  'credit_limit': 'حد الائتمان',
  'credit_balance': 'رصيد الائتمان',
  'owes': 'مدين',
  'edit_customer': 'تعديل العميل',
  'customer_name': 'اسم العميل',
  'customer_save_error': 'فشل في حفظ بيانات العميل',
  'confirm_delete_customer': 'هل أنت متأكد من حذف « {name} »؟',
  'customer_deleted_successfully': 'تم حذف العميل بنجاح',
  'credit_load_error': 'فشل في تحميل معلومات الائتمان',
  'credit_no_customer_selected': 'لم يتم اختيار أي عميل',
  'credit_invalid_payment_amount': 'الرجاء إدخال مبلغ دفعة صالح أكبر من 0',
  'credit_payment_success': 'تم تسجيل دفعة بقيمة {amount}. الرصيد الجديد: {balance}',
  'credit_payment_error': 'فشل في معالجة دفعة الائتمان: {message}',
  'unknown_error': 'خطأ غير معروف',
  'credit_badge_owed': '{amount} مستحق',
  'manage_credit': 'إدارة الائتمان',
  'adjust_search_prompt': 'قم بتعديل البحث الخاص بك',
  'add_first_customer_prompt': 'أضف أول عميل لديك للبدء',
  'add_new_customer': 'إضافة عميل جديد',
  'update_customer_description': 'تحديث معلومات العميل',
  'create_customer_description': 'أدخل تفاصيل العميل الجديد',
  'update_customer': 'تحديث العميل',
  'create_customer': 'إنشاء العميل',
  'credit_management_title': 'إدارة الائتمان - {name}',
  'available_credit': 'الرصيد المتاح',
  'after_payment': 'بعد الدفع',
  'credit_transaction_history': 'سجل معاملات الائتمان',
  'balance_after': 'الرصيد بعد',
  'loading_transactions': 'جارٍ تحميل المعاملات...',
  'no_credit_transactions': 'لا توجد معاملات ائتمان',
  'transaction_type_sale': 'بيع',
  'transaction_type_payment': 'دفعة',
  'transaction_type_adjustment': 'تعديل',
  'optional_note_placeholder': 'ملاحظة اختيارية...',
  'credit_payment_reference': 'دفعة ائتمان - {date}',
  'type': 'النوع',

  // Suppliers
  'supplier_created_successfully': 'تم إنشاء المورد بنجاح',
  'supplier_updated_successfully': 'تم تحديث المورد بنجاح',
  'create_supplier_error': 'فشل في إنشاء المورد',
  'update_supplier_error': 'فشل في تحديث المورد',
  'suppliers_load_error': 'حدث خطأ أثناء تحميل الموردين',
  'supplier_name_required': 'اسم المورد مطلوب',
  'search_suppliers': 'ابحث عن الموردين...',
  'suppliers_results': '{count} مورد',
  'no_suppliers_found': 'لم يتم العثور على موردين',
  'add_supplier': 'إضافة مورد',
  'edit_supplier': 'تعديل المورد',
  'add_new_supplier': 'إضافة مورد جديد',
  'update_supplier_description': 'تحديث معلومات المورد',
  'create_supplier_description': 'أدخل تفاصيل المورد الجديد',
  'update_supplier': 'تحديث المورد',
  'create_supplier': 'إنشاء المورد',
  'supplier_name': 'اسم المورد',
  'contact_person': 'جهة الاتصال',
  'search_orders': 'ابحث عن الطلبات...',
  'total_outstanding': 'إجمالي المبالغ المستحقة',
  'total_paid': 'إجمالي المدفوع',
  'total_orders_count': 'عدد الطلبات',
  'supplier_delete_confirm': 'هل أنت متأكد من حذف « {name} »؟',
  'supplier_deleted_successfully': 'تم حذف المورد بنجاح',
  'supplier_save_error': 'فشل في حفظ بيانات المورد',
  'adjust_search_suppliers': 'قم بتعديل البحث الخاص بك',
  'add_first_supplier_prompt': 'أضف أول مورد لبدء العمل',
  'total_orders': 'إجمالي الطلبات',
  'total_value': 'القيمة الإجمالية',
  'paid_amount': 'المبلغ المدفوع',
  'outstanding': 'المتبقي',
  'purchase_orders': 'أوامر الشراء',
  'create_purchase_order': 'إنشاء أمر شراء',
  'warehouse': 'المستودع',
  'select_warehouse': 'اختر المستودع',
  'unit_cost': 'التكلفة لكل وحدة',
  'received_quantity': 'الكمية المستلمة',
  'loading_order_items': 'جارٍ تحميل عناصر الطلب...',
  'no_order_items': 'لا توجد عناصر لهذا الطلب.',
  'unknown': 'غير معروف',
  'offline_order_create_success': 'تم إنشاء أمر الشراء بنجاح',
  'offline_order_create_error': 'فشل في إنشاء أمر الشراء: {message}',
  'offline_order_receive_success': 'تم استلام الطلب وتحديث المخزون',
  'offline_order_receive_error': 'فشل في استلام الطلب',
  'offline_order_delete_success': 'تم حذف الطلب بنجاح',
  'offline_order_delete_error': 'فشل في حذف الطلب',
  'offline_order_payment_update_error': 'فشل في تحديث معلومات الدفع',
  'offline_order_payment_recorded': 'تم تسجيل دفعة بقيمة {amount}',
  'offline_order_payment_error': 'فشل في تسجيل الدفع',
  'order_payment_note': 'دفعة للطلب {order}',
  'purchase_order_received_reason': 'استلام أمر شراء',
  'make_payment': 'تسجيل دفعة',
  'pay_full_amount': 'دفع المبلغ الكامل',
  'due': 'المتبقي',
  'order_details': 'تفاصيل الطلب',
  'order_information': 'معلومات الطلب',
  'supplier_and_warehouse': 'المورد والمستودع',
  'order_number_label': 'رقم الطلب',
  'order_date_label': 'تاريخ الطلب',
  'received_date_label': 'تاريخ الاستلام',
  'notes_label': 'ملاحظات',
  'total_amount': 'المبلغ الإجمالي',
  'payment_status_paid': 'مدفوع',
  'payment_status_partial': 'مدفوع جزئياً',
  'payment_status_unpaid': 'غير مدفوع',
  'order_status_draft': 'مسودة',
  'order_status_pending': 'قيد الانتظار',
  'order_status_ordered': 'تم الطلب',
  'order_status_received': 'تم الاستلام',
  'order_status_cancelled': 'ملغى',
  'mark_as_ordered': 'تعيين كـ تم الطلب',
  'receive_order': 'استلام الطلب',
  'view_details': 'عرض التفاصيل',
  'delete_order': 'حذف الطلب',
  'delete_order_title': 'حذف الطلب',
  'delete_order_description': 'هل أنت متأكد من حذف الطلب {orderNumber}؟ لا يمكن التراجع عن هذا الإجراء.',
  'order_not_found': 'لم يتم العثور على الطلب',
  'payment_details_order': 'الطلب:',
  'payment_details_total': 'الإجمالي:',
  'payment_details_paid': 'المدفوع:',
  'payment_details_due': 'المتبقي:',
  'bank_check': 'شيك بنكي',
  'primary_location_badge': '(رئيسي)',
  'orders_module_title': 'وحدة الطلبات',
  'orders_module_description': 'هذه صفحة مبسطة لإدارة أوامر الشراء في وضع عدم الاتصال.',
  'orders_module_point_create': 'إنشاء أوامر شراء للموردين',
  'orders_module_point_track': 'متابعة حالة الطلب والتسليم',
  'orders_module_point_manage': 'إدارة العناصر والكميات',
  'orders_module_point_update': 'تحديث المخزون عند الاستلام',
  'no_orders_created': 'لم يتم إنشاء أي طلبات بعد',
  'active_orders_count': '{count} طلب قيد التنفيذ',
  'available_suppliers': 'الموردون المتاحون',
  'available_products': 'المنتجات المتاحة',
  'order_notes_placeholder': 'ملاحظات الطلب (اختياري)',
  'payment_information': 'معلومات الدفع',
  'credit_pay_later': 'دين (دفع لاحق)',
  'amount_paid': 'المبلغ المدفوع',
  'order_summary': 'ملخص الطلب',

  // Reports
  'reports_title': 'التقارير والتحليلات',
  'reports_export': 'تصدير التقرير',
  'reports_select_type_placeholder': 'اختر نوع التقرير',
  'reports_type_overview': 'نظرة عامة',
  'reports_type_sales': 'تقرير المبيعات',
  'reports_type_inventory': 'تقرير المخزون',
  'reports_type_customers': 'تقرير العملاء',
  'reports_select_range_placeholder': 'اختر الفترة الزمنية',
  'reports_range_7_days': 'آخر 7 أيام',
  'reports_range_30_days': 'آخر 30 يومًا',
  'reports_range_90_days': 'آخر 90 يومًا',
  'reports_range_year': 'العام الماضي',
  'reports_total_revenue': 'إجمالي الإيرادات',
  'reports_total_revenue_desc': '{count} معاملة',
  'reports_avg_transaction': 'متوسط الصفقة',
  'reports_avg_transaction_desc': 'متوسط لكل عملية بيع',
  'reports_total_customers': 'إجمالي العملاء',
  'reports_total_customers_desc': 'العملاء المسجلون',
  'reports_products_card': 'المنتجات',
  'reports_products_low_stock': '{count} منتج منخفض المخزون',
  'reports_sales_overview': 'نظرة عامة على المبيعات',
  'reports_total_sales': 'إجمالي المبيعات',
  'reports_transactions': 'المعاملات',
  'reports_average_sale': 'متوسط البيع',
  'reports_inventory_status': 'حالة المخزون',
  'reports_total_products': 'إجمالي المنتجات',
  'reports_low_stock_items': 'عناصر منخفضة المخزون',
  'reports_stock_health': 'حالة المخزون',
  'reports_stock_health_good': 'جيد',
  'reports_stock_health_attention': 'بحاجة للمتابعة',
  'reports_module_title': 'وحدة التقارير',
  'reports_module_desc': 'صفحة مبسطة تعرض مؤشرات أساسية من بياناتك في وضع عدم الاتصال.',
  'reports_module_point_charts': 'رسوم بيانية وجداول تفاعلية',
  'reports_module_point_sales': 'تحليل تفصيلي للمبيعات حسب التاريخ والمنتج والعميل',
  'reports_module_point_inventory': 'تقارير دوران المخزون',
  'reports_module_point_profit': 'تحليل هامش الربح',
  'reports_module_point_export': 'تصدير إلى PDF/Excel',
  'reports_module_point_filters': 'فترات وتصفية قابلة للتخصيص',

  // Inventory Counts
  'inventory_counts_title': 'جرد المخزون',
  'inventory_count_create_new': 'إنشاء جرد جديد',
  'inventory_count_dialog_title': 'إنشاء جرد جديد',
  'inventory_count_dialog_description': 'قم بإعداد جرد جديد للحصول على مراقبة دقيقة للمخزون.',
  'inventory_count_required_fields': 'يرجى ملء جميع الحقول الإلزامية.',
  'inventory_count_name_label': 'اسم الجرد *',
  'inventory_count_name_placeholder': 'مثال: الجرد الشهري - المتجر الرئيسي',
  'inventory_count_location_label': 'الموقع *',
  'inventory_count_location_placeholder': 'اختر الموقع',
  'inventory_count_description_placeholder': 'وصف اختياري',
  'inventory_count_create_button': 'إنشاء الجرد',
  'inventory_count_card_description': 'الموقع: {location} • التقدم: {progress}%',
  'inventory_count_unknown_location': 'موقع غير معروف',
  'inventory_count_start_button': 'بدء الجرد',
  'inventory_count_continue_button': 'متابعة الجرد',
  'inventory_count_view_results': 'عرض النتائج',
  'inventory_count_delete_title': 'حذف الجرد',
  'inventory_count_delete_description': 'هل أنت متأكد من رغبتك في حذف « {name} »؟ لا يمكن التراجع عن هذا الإجراء.',
  'inventory_count_back': 'العودة إلى الجرد',
  'inventory_count_status_draft': 'مسودة',
  'inventory_count_status_in_progress': 'قيد التنفيذ',
  'inventory_count_status_completed': 'مكتمل',
  'inventory_count_location_display': 'الموقع: {location}',
  'inventory_count_complete_button': 'إنهاء الجرد ({progress}%)',
  'inventory_count_search_placeholder': 'ابحث عن المنتجات...',
  'inventory_count_barcode_placeholder': 'مسح أو إدخال الباركود...',
  'inventory_count_expected': 'المتوقع',
  'inventory_count_actual': 'الفعلي',
  'inventory_count_not_counted': 'غير معدود',
  'inventory_count_counted': 'معدود',
  'inventory_count_count_action': 'عد',
  'inventory_count_remaining_items': 'يرجى عد جميع العناصر. تبقى {count} عناصر.',
  'inventory_count_complete_success': 'تم إكمال الجرد! تم تحديث الكميات.',
  'inventory_count_complete_error': 'فشل في إنهاء الجرد.',
  'inventory_count_create_success': 'تم إنشاء الجرد بنجاح.',
  'inventory_count_create_error': 'فشل في إنشاء الجرد.',
  'inventory_count_delete_success': 'تم حذف الجرد بنجاح.',
  'inventory_count_delete_error': 'فشل في حذف الجرد.',
  'inventory_count_update_error': 'فشل في تحديث عنصر الجرد.',
  'inventory_count_product_missing': 'المنتج غير موجود في هذا الجرد.',
  'inventory_count_product_barcode_missing': 'لم يتم العثور على منتج بهذا الباركود.',
  
  // Dashboard
  'total_products': 'إجمالي المنتجات',
  'active_inventory_items': 'عناصر المخزون النشطة',
  'registered_customers': 'العملاء المسجلين',
  'total_sales': 'إجمالي المبيعات',
  'completed_transactions': 'المعاملات المكتملة',
  'revenue': 'الإيرادات',
  'total_sales_revenue': 'إجمالي إيرادات المبيعات',
  'dashboard_low_stock_alert': 'تنبيه المخزون المنخفض',
  'low_stock_message': '{count} منتج في نفاد المخزون.',
  'check_inventory_reorder': 'تحقق من مخزونك لإعادة الطلب.',
  'recent_sales': 'المبيعات الأخيرة',
  'no_sales_recorded': 'لم يتم تسجيل مبيعات حتى الآن',
  'low_stock_products': 'المنتجات ذات المخزون المنخفض',
  'all_products_well_stocked': 'جميع المنتجات متوفرة بشكل جيد',
  'categorized': 'مصنف',
  'uncategorized': 'غير مصنف',
  'min': 'الحد الأدنى',
  
  // Products
  'product_created_successfully': 'تم إنشاء المنتج بنجاح',
  'failed_to_create_product': 'فشل في إنشاء المنتج',
  'unknown_category': 'فئة غير معروفة',
  'image_size_limit': 'يجب أن يكون حجم الصورة أقل من 5 ميجابايت',
  'select_valid_image': 'يرجى اختيار ملف صورة صالح',
  'product_updated_successfully': 'تم تحديث المنتج بنجاح',
  'failed_to_update_product': 'فشل في تحديث المنتج',
  'product_deleted_successfully': 'تم حذف المنتج بنجاح',
  'failed_to_delete_product': 'فشل في حذف المنتج',
  'category_deleted_successfully': 'تم حذف الفئة بنجاح',
  'failed_to_delete_category': 'فشل في حذف الفئة',
  'category_updated_successfully': 'تم تحديث الفئة بنجاح',
  'failed_to_update_category': 'فشل في تحديث الفئة',
  'category_created_successfully': 'تم إنشاء الفئة بنجاح',
  'failed_to_create_category': 'فشل في إنشاء الفئة',
  'products_and_categories': 'المنتجات والفئات',
  'manage_categories': 'إدارة الفئات',
  'filter_by_category': 'تصفية حسب الفئة',
  'add_category': 'إضافة فئة',
  'search_products': 'بحث عن المنتجات...',
  'price': 'السعر',
  'stock': 'المخزون',
  'barcode': 'الباركود',
  'product_name': 'اسم المنتج',
  'description': 'الوصف',
  'category': 'الفئة',
  'select_category': 'اختر فئة',
  'no_category': 'لا توجد فئة',
  'cost_price': 'سعر التكلفة',
  'selling_price': 'سعر البيع',
  'semi_wholesale_price_optional': 'سعر نصف جملة (اختياري)',
  'wholesale_price_optional': 'سعر الجملة (اختياري)',
  'quantity': 'الكمية',
  'min_stock_level': 'الحد الأدنى للمخزون',
  'unit': 'الوحدة',
  'product_image': 'صورة المنتج',
  'upload_product_image': 'رفع صورة المنتج',
  'choose_image': 'اختر صورة',
  'cancel': 'إلغاء',
  'create': 'إنشاء',
  'update': 'تحديث',
  'upload_category_image': 'رفع صورة الفئة',
  'edit_category': 'تعديل الفئة',
  'category_name': 'اسم الفئة',
  'category_image': 'صورة الفئة',
  
  // Inventory
  'location_name_required': 'اسم الموقع مطلوب',
  'stock_location_updated': 'تم تحديث موقع المخزون بنجاح',
  'stock_location_created': 'تم إنشاء موقع المخزون بنجاح',
  'failed_to_save_location': 'فشل في حفظ موقع المخزون',
  'inventory_management': 'إدارة المخزون',
  'inventory_value': 'قيمة المخزون',
  'low_stock_items': 'عناصر المخزون المنخفض',
  'active_products_in_inventory': 'المنتجات النشطة في المخزون',
  'total_cost_value_of_stock': 'القيمة الإجمالية لتكلفة المخزون',
  'items_below_minimum_level': 'عناصر تحت الحد الأدنى',
  'current_stock': 'المخزون الحالي',
  'min_level': 'الحد الأدنى',
  'stock_value': 'قيمة المخزون',
  'actions': 'الإجراءات',
  'low_stock': 'مخزون منخفض',
  'in_stock': 'في المخزون',
  'edit_stock_location': 'تعديل موقع المخزون',
  'add_new_stock_location': 'إضافة موقع مخزون جديد',
  'location_name': 'اسم الموقع',
  'address': 'العنوان',
  'set_as_primary_location': 'تعيين كموقع أساسي',
  'location_actions': 'إجراءات الموقع',
  'manage_this_stock_location': 'إدارة موقع المخزون هذا',
  'adjust_stock': 'تعديل المخزون',
  'adjustment_quantity': 'كمية التعديل',
  'new_stock_level': 'مستوى المخزون الجديد',
  'reason_optional': 'السبب (اختياري)',
  'apply_adjustment': 'تطبيق التعديل',
  'select_location': 'اختر موقع',
  'all_locations': 'جميع المواقع',
  'add_location': 'إضافة موقع',
  'adjustment_reason_placeholder': 'مثال: تصحيح المخزون، بضائع تالفة، إلخ.',
  'select_source_location': 'اختر الموقع المصدر',
  'select_destination_location': 'اختر موقع الوجهة',
  'select_reason_optional': 'اختر سبب (اختياري)',
  'location_name_placeholder': 'مثال: المتجر الرئيسي، المستودع أ',
  'location_description_placeholder': 'وصف مختصر لهذا الموقع',
  'physical_address_placeholder': 'العنوان الفعلي',
  
  // Sales History
  'sales_list': 'قائمة المبيعات',
  'invoice_number': 'رقم الفاتورة',
  'customer_filter': 'تصفية حسب العميل',
  'date_filter': 'تصفية حسب التاريخ',
  'all_customers': 'جميع العملاء',
  'cash_customer': 'عميل نقدي',
  'no_sales_found': 'لم يتم العثور على مبيعات',
  'sale_details': 'تفاصيل البيع',
  'product': 'المنتج',
  'view_invoice': 'عرض الفاتورة',
  'download_invoice': 'تحميل الفاتورة',
  'all_time': 'كل الأوقات',
  'today': 'اليوم',
  'yesterday': 'أمس',
  'this_week': 'هذا الأسبوع',
  'last_7_days': 'آخر 7 أيام',
  'this_month': 'هذا الشهر',
  'last_30_days': 'آخر 30 يوم',
  'actions': 'إجراءات',
  'offline_sales_history_title': 'سجل المبيعات',
  'offline_sales_export': 'تصدير CSV',
  'offline_sales_total_sales': 'إجمالي المبيعات',
  'offline_sales_total_sales_desc': '{count} معاملة',
  'offline_sales_transactions': 'المعاملات',
  'offline_sales_transactions_desc': 'مبيعات مكتملة',
  'offline_sales_average_sale': 'متوسط البيع',
  'offline_sales_average_sale_desc': 'لكل معاملة',
  'offline_sales_search_placeholder': 'ابحث برقم الفاتورة أو العميل…',
  'offline_sales_status_filter_placeholder': 'تصفية حسب الحالة',
  'offline_sales_payment_filter_placeholder': 'تصفية حسب الدفع',
  'offline_sales_status_all': 'جميع الحالات',
  'offline_sales_payment_all': 'جميع طرق الدفع',
  'offline_sales_no_results_filters': 'قم بتعديل المرشحات لتحسين البحث',
  'offline_sales_no_results_empty': 'لم يتم تسجيل أي مبيعات بعد',
  'offline_sales_info_section': 'معلومات البيع',
  'offline_sales_items_section': 'العناصر',
  'offline_sales_print_receipt': 'طباعة الإيصال',
  'offline_sales_printer_not_ready_title': 'الطابعة غير جاهزة',
  'offline_sales_printer_not_ready_desc': 'يرجى إعداد وتوصيل الطابعة الحرارية في الإعدادات',
  'offline_sales_print_success': 'تم طباعة الإيصال بنجاح',
  'offline_sales_print_error_title': 'خطأ في الطباعة',
  'offline_sales_print_error_desc': 'تعذر طباعة الإيصال. يرجى التحقق من اتصال الطابعة.',
  'offline_sales_export_success': 'تم تصدير بيانات المبيعات بنجاح',
  'walk_in_customer': 'عميل عابر',
  'unknown_customer': 'عميل غير معروف',
  'sale_status_completed': 'مكتملة',
  'sale_status_pending': 'قيد الانتظار',
  'sale_status_cancelled': 'ملغاة',
  'card_payment': 'بطاقة',
  'unit_price': 'سعر الوحدة',
  'change_amount': 'الباقي',
  
  // Common actions
  'search': 'بحث',
  'add': 'إضافة',
  'edit': 'تعديل',
  'delete': 'حذف',
  'close': 'إغلاق',
  'confirm': 'تأكيد',
  'loading': 'جاري التحميل...',
  'no_results': 'لا توجد نتائج',
  'error': 'خطأ',
  'success': 'نجاح',
  'required_field': 'هذا الحقل مطلوب',
  'invalid_format': 'صيغة غير صالحة',
  
  // Units
  'piece': 'قطعة',
  'kg': 'كيلو',
  'liter': 'لتر',
  'box': 'علبة',
  'pack': 'عبوة',
  
  // Currencies
  'currency': 'درهم',
};

interface I18nContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string, params?: { [key: string]: string | number }) => string;
  dir: 'ltr' | 'rtl';
}

const I18nContext = createContext<I18nContextType>({
  language: 'fr',
  setLanguage: () => {},
  t: (key) => key,
  dir: 'ltr',
});

export const I18nProvider = ({ children }: { children: ReactNode }) => {
  const [language, setLanguageState] = useState<Language>('fr');

  // Load language preference from localStorage only
  useEffect(() => {
    const storedLang = localStorage.getItem('language');
    
    if (storedLang && (storedLang === 'fr' || storedLang === 'ar')) {
      setLanguageState(storedLang);
    }
  }, []);

  // Set language with side effects
  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
    localStorage.setItem('language', lang);
    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
  };

  // Update document direction when language changes
  useEffect(() => {
    document.documentElement.dir = language === 'ar' ? 'rtl' : 'ltr';
  }, [language]);

  // Translation function
  const t = (key: string, params?: { [key: string]: string | number }): string => {
    const translations = language === 'fr' ? frTranslations : arTranslations;
    let text = translations[key] || key;
    
    // Replace parameters in the format {0}, {1}, etc. or {name}
    if (params) {
      Object.entries(params).forEach(([paramKey, value]) => {
        text = text.replace(new RegExp(`\\{${paramKey}\\}`, 'g'), value.toString());
      });
    }
    
    return text;
  };

  const contextValue: I18nContextType = {
    language,
    setLanguage,
    t,
    dir: language === 'ar' ? 'rtl' : 'ltr'
  };
  
  return (
    <I18nContext.Provider value={contextValue}>
      {children}
    </I18nContext.Provider>
  );
};

export const useI18n = () => useContext(I18nContext);
